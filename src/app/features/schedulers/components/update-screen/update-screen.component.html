<form [formGroup]="screenForm" (ngSubmit)="onSubmit()" (drop)="onFileDropped($event)" (dragover)="onDragOver($event)" enctype="multipart/form-data">
  <div class="update-screen-main--container">
    <!-- Image Upload -->
    <div>
      <input type="file" (change)="onFileSelected($event)" accept="image/*" style="display: none" #fileInput multiple name="screenImage">
      <div class="update-screen--drop-area" (click)="openFileSelector()" (drop)="onFileDropped($event)" (dragover)="onDragOver($event)">
        <img src="assets/images/upload-file.svg"/>
        <p>Drag & Drop to Upload Image</p>
        <p class="update-screen-browse-file--content">or browse</p>
        <div class="update-screen-image--container">
          <ng-container *ngFor="let imageUrl of fileUrls; let i = index">
            <div class="update-screen--image-item">
              <div class="update-screen--image-preview">
                <img [src]="imageUrl" alt="Uploaded Image">
                <div class="remove-button-container">
                  <button mat-icon-button class="remove-button" (click)="removeImage(i)">
                    <mat-icon>remove_circle</mat-icon>
                  </button>
                </div>
              </div>
            </div>
          </ng-container>
        </div>
        
      </div>
    </div>

    <!-- Screen Details -->
    <div class="update-screen--content">
      <mat-form-field appearance="outline" [style.fontSize.px]="14" class="matform-full-width" >
        <mat-label>Screen Name</mat-label>
        <input matInput formControlName="screenName" required />
        <mat-hint style="color: red;" *ngIf="screenForm.get('screenName')?.touched && screenForm.get('screenName')?.errors?.['required']">
          Screen Name is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline" [style.fontSize.px]="14" class="matform-full-width">
        <mat-label>Screen Status</mat-label>
        <mat-select required formControlName="screenStatus">
          <mat-option value="Active">Active</mat-option>
          <mat-option value="Inactive">Inactive</mat-option>
        </mat-select>
        <mat-hint style="color: red;" *ngIf="screenForm.get('screenStatus')?.touched && screenForm.get('screenStatus')?.errors?.['required']">
          Screen Status is required
        </mat-hint>
      </mat-form-field>

      

      <mat-form-field appearance="outline" [style.fontSize.px]="14" class="matform-full-width" >
        <mat-label>Size</mat-label>
        <input matInput formControlName="size" required />
        <mat-hint style="color: red;" *ngIf="screenForm.get('size')?.touched && screenForm.get('size')?.errors?.['required']">
          Size is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline" [style.fontSize.px]="14" class="matform-full-width">
        <mat-label>SFT</mat-label>
        <input matInput formControlName="SFT" required />
        <mat-hint style="color: red;" *ngIf="screenForm.get('SFT')?.touched && screenForm.get('SFT')?.errors?.['required']">
          SFT is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline" [style.fontSize.px]="14" class="matform-full-width">
        <mat-label>Next Available Date</mat-label>
        <input matInput formControlName="NextAvailableDate" [matDatepicker]="picker" required/>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
        <mat-hint style="color: red;" *ngIf="screenForm.get('NextAvailableDate')?.touched && screenForm.get('NextAvailableDate')?.errors?.['required']">
          Next Available Date is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Location Coordinates</mat-label>
        <input matInput formControlName="locationCoordinates" required />
        <mat-hint style="color: red;" *ngIf="screenForm.get('locationCoordinates')?.touched && screenForm.get('locationCoordinates')?.errors?.['required']">
          Location Coordinates is required
        </mat-hint>
        <mat-hint style="color: red;" *ngIf="screenForm.get('locationCoordinates')?.errors?.['invalidCoordinate']">
          Invalid coordinates format. Please enter in the format: latitude,longitude
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline" [style.fontSize.px]="14" class="matform-full-width" >
        <mat-label>Address</mat-label>
        <textarea matInput formControlName="address" required></textarea>
        <mat-hint style="color: red;" *ngIf="screenForm.get('address')?.touched && screenForm.get('address')?.errors?.['required']">
          Address is required
        </mat-hint>
      </mat-form-field>
    </div>

    <!-- Submit Button -->
    <div class="update-screen-footer-content">
      <button mat-raised-button class="update-screen-footer-button" type="submit">Update Screen</button>
    </div>
  </div>
</form>
